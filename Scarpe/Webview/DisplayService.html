<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Scarpe::Webview::DisplayService
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Scarpe::Webview::DisplayService";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span>
     &raquo; 
    <span class="title">DisplayService</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="docpages_list_link"
        href="../../docpages_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Scarpe::Webview::DisplayService
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Shoes/DisplayService.html" title="Shoes::DisplayService (class)">Shoes::DisplayService</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../../Shoes/DisplayService.html" title="Shoes::DisplayService (class)">Shoes::DisplayService</a></span></li>
          
            <li class="next">Scarpe::Webview::DisplayService</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../../Shoes/Log.html" title="Shoes::Log (module)">Shoes::Log</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/scarpe/wv/webview_local_display.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This is the simplest type of Webview DisplayService. It creates Webview drawables
corresponding to Shoes drawables, manages the Webview and its DOM tree, and
generally keeps the Shoes/Webview connection working.</p>

<p>This is an in-process Webview-based display service, with all the limitations that
entails. Slow handlers will crash, ending this display service will end the
process, too many or too large evals can crash the process, etc.
Frequently it&#39;s better to use a RelayDisplayService to a second
process containing one of these.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Shoes/Log.html" title="Shoes::Log (module)">Shoes::Log</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Shoes/Log.html#DEFAULT_COMPONENT-constant" title="Shoes::Log::DEFAULT_COMPONENT (constant)">Shoes::Log::DEFAULT_COMPONENT</a></span>, <span class='object_link'><a href="../../Shoes/Log.html#DEFAULT_DEBUG_LOG_CONFIG-constant" title="Shoes::Log::DEFAULT_DEBUG_LOG_CONFIG (constant)">Shoes::Log::DEFAULT_DEBUG_LOG_CONFIG</a></span>, <span class='object_link'><a href="../../Shoes/Log.html#DEFAULT_LOG_CONFIG-constant" title="Shoes::Log::DEFAULT_LOG_CONFIG (constant)">Shoes::Log::DEFAULT_LOG_CONFIG</a></span></p>


  <h2>Class Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance-class_method" title="instance (class method)">.<strong>instance</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute instance.</p>
</div></span>
  
</li>

    
  </ul>

  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#app-instance_method" title="#app (instance method)">#<strong>app</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>app is the Scarpe::Webview::App.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#control_interface-instance_method" title="#control_interface (instance method)">#<strong>control_interface</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The ControlInterface is used to handle internal events in Webview Scarpe.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#doc_root-instance_method" title="#doc_root (instance method)">#<strong>doc_root</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The DocumentRoot is the top drawable of the Webview-side drawable tree.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrangler-instance_method" title="#wrangler (instance method)">#<strong>wrangler</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>wrangler is the Scarpe::WebWrangler.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_display_drawable_for-instance_method" title="#create_display_drawable_for (instance method)">#<strong>create_display_drawable_for</strong>(drawable_class_name, drawable_id, properties, parent_id:, is_widget:)  &#x21d2; Webview::Drawable </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a Webview display drawable for a specific Shoes drawable, and pair it with the linkable ID for this Shoes drawable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">#<strong>destroy</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Destroy the display service and the app.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; DisplayService </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This is called before any of the various Webview::Drawables are created, to be able to create them and look them up.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Shoes/Log.html" title="Shoes::Log (module)">Shoes::Log</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Shoes/Log.html#configure_logger-class_method" title="Shoes::Log.configure_logger (method)">configure_logger</a></span>, <span class='object_link'><a href="../../Shoes/Log.html#log_init-instance_method" title="Shoes::Log#log_init (method)">#log_init</a></span>, <span class='object_link'><a href="../../Shoes/Log.html#logger-class_method" title="Shoes::Log.logger (method)">logger</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../../Shoes/DisplayService.html" title="Shoes::DisplayService (class)">Shoes::DisplayService</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Shoes/DisplayService.html#dispatch_event-class_method" title="Shoes::DisplayService.dispatch_event (method)">dispatch_event</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#display_service-class_method" title="Shoes::DisplayService.display_service (method)">display_service</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#full_reset!-class_method" title="Shoes::DisplayService.full_reset! (method)">full_reset!</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#query_display_drawable_for-instance_method" title="Shoes::DisplayService#query_display_drawable_for (method)">#query_display_drawable_for</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#set_display_service_class-class_method" title="Shoes::DisplayService.set_display_service_class (method)">set_display_service_class</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#set_drawable_pairing-instance_method" title="Shoes::DisplayService#set_drawable_pairing (method)">#set_drawable_pairing</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#subscribe_to_event-class_method" title="Shoes::DisplayService.subscribe_to_event (method)">subscribe_to_event</a></span>, <span class='object_link'><a href="../../Shoes/DisplayService.html#unsub_from_events-class_method" title="Shoes::DisplayService.unsub_from_events (method)">unsub_from_events</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Scarpe::Webview::DisplayService (class)">DisplayService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>This is called before any of the various Webview::Drawables are created, to be
able to create them and look them up.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Scarpe::Webview::DisplayService (class)">DisplayService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="#instance-class_method" title="Scarpe::Webview::DisplayService.instance (method)">instance</a></span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Shoes.html" title="Shoes (class)">Shoes</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Shoes/Errors.html" title="Shoes::Errors (module)">Errors</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Shoes/Errors/SingletonError.html" title="Shoes::Errors::SingletonError (class)">SingletonError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR! This is meant to be a singleton!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Scarpe::Webview::DisplayService (class)">DisplayService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="#instance-class_method" title="Scarpe::Webview::DisplayService.instance (method)">instance</a></span></span> <span class='op'>=</span> <span class='kw'>self</span>

  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log_init'>log_init</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Webview::DisplayService</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='ivar'>@display_drawable_for</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id="instance=-class_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="instance-class_method">
  
    .<strong>instance</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute instance.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instance'>instance</span>
  <span class='ivar'>@instance</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="app-instance_method">
  
    #<strong>app</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>app is the Scarpe::Webview::App</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_app'>app</span>
  <span class='ivar'>@app</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="control_interface-instance_method">
  
    #<strong>control_interface</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The ControlInterface is used to handle internal events in Webview Scarpe</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_control_interface'>control_interface</span>
  <span class='ivar'>@control_interface</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="doc_root-instance_method">
  
    #<strong>doc_root</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The DocumentRoot is the top drawable of the Webview-side drawable tree</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_doc_root'>doc_root</span>
  <span class='ivar'>@doc_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="wrangler-instance_method">
  
    #<strong>wrangler</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>wrangler is the Scarpe::WebWrangler</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrangler'>wrangler</span>
  <span class='ivar'>@wrangler</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_display_drawable_for-instance_method">
  
    #<strong>create_display_drawable_for</strong>(drawable_class_name, drawable_id, properties, parent_id:, is_widget:)  &#x21d2; <tt><span class='object_link'><a href="Drawable.html" title="Scarpe::Webview::Drawable (class)">Webview::Drawable</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a Webview display drawable for a specific Shoes drawable, and pair it with
the linkable ID for this Shoes drawable.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>drawable_class_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The class name of the Shoes drawable, e.g. Shoes::Button</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>drawable_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the linkable ID for drawable events</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a JSON-serialisable Hash with the drawable&#39;s Shoes styles</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>is_widget</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>whether the class is a user-defined Shoes::Widget subclass</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Drawable.html" title="Scarpe::Webview::Drawable (class)">Webview::Drawable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the newly-created Webview drawable</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_display_drawable_for'>create_display_drawable_for</span><span class='lparen'>(</span><span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span><span class='comma'>,</span> <span class='id identifier rubyid_drawable_id'>drawable_id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='comma'>,</span> <span class='label'>parent_id:</span><span class='comma'>,</span> <span class='label'>is_widget:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='id identifier rubyid_query_display_drawable_for'>query_display_drawable_for</span><span class='lparen'>(</span><span class='id identifier rubyid_drawable_id'>drawable_id</span><span class='comma'>,</span> <span class='label'>nil_ok:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_existing'>existing</span>
    <span class='ivar'>@log</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>There is already a Scarpe drawable for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_drawable_id'>drawable_id</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>! Returning </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_existing'>existing</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> rather than creating a </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_existing'>existing</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>App</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>unless</span> <span class='ivar'>@doc_root</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../MissingDocRootError.html" title="Scarpe::MissingDocRootError (class)">MissingDocRootError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Webview::DocumentRoot is supposed to be created before Webview::App!</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_display_app'>display_app</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="App.html" title="Scarpe::Webview::App (class)">App</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="App.html#initialize-instance_method" title="Scarpe::Webview::App#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_display_app'>display_app</span><span class='period'>.</span><span class='id identifier rubyid_document_root'>document_root</span> <span class='op'>=</span> <span class='ivar'>@doc_root</span>
    <span class='ivar'>@control_interface</span> <span class='op'>=</span> <span class='id identifier rubyid_display_app'>display_app</span><span class='period'>.</span><span class='id identifier rubyid_control_interface'>control_interface</span>
    <span class='ivar'>@control_interface</span><span class='period'>.</span><span class='id identifier rubyid_doc_root'>doc_root</span> <span class='op'>=</span> <span class='ivar'>@doc_root</span>
    <span class='ivar'>@app</span> <span class='op'>=</span> <span class='ivar'>@control_interface</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span>
    <span class='ivar'>@wrangler</span> <span class='op'>=</span> <span class='ivar'>@control_interface</span><span class='period'>.</span><span class='id identifier rubyid_wrangler'>wrangler</span>

    <span class='id identifier rubyid_set_drawable_pairing'>set_drawable_pairing</span><span class='lparen'>(</span><span class='id identifier rubyid_drawable_id'>drawable_id</span><span class='comma'>,</span> <span class='id identifier rubyid_display_app'>display_app</span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='id identifier rubyid_display_app'>display_app</span>
  <span class='kw'>end</span>

  <span class='comment'># Create a corresponding display drawable
</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_widget'>is_widget</span>
    <span class='id identifier rubyid_display_class'>display_class</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Flow.html" title="Scarpe::Webview::Flow (class)">Flow</a></span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_display_class'>display_class</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Drawable.html" title="Scarpe::Webview::Drawable (class)">Drawable</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_class_for'><span class='object_link'><a href="Drawable.html#display_class_for-class_method" title="Scarpe::Webview::Drawable.display_class_for (method)">display_class_for</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_display_class'>display_class</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Drawable.html" title="Scarpe::Webview::Drawable (class)">Drawable</a></span></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../BadDisplayClassType.html" title="Scarpe::BadDisplayClassType (class)">BadDisplayClassType</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wrong display class type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_class'>display_class</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> for class name </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_display_drawable'>display_drawable</span> <span class='op'>=</span> <span class='id identifier rubyid_display_class'>display_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_drawable_pairing'>set_drawable_pairing</span><span class='lparen'>(</span><span class='id identifier rubyid_drawable_id'>drawable_id</span><span class='comma'>,</span> <span class='id identifier rubyid_display_drawable'>display_drawable</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_drawable_class_name'>drawable_class_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DocumentRoot</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># DocumentRoot is created before App. Mostly doc_root is just like any other drawable,
</span>    <span class='comment'># but we&#39;ll want a reference to it when we create App.
</span>    <span class='ivar'>@doc_root</span> <span class='op'>=</span> <span class='id identifier rubyid_display_drawable'>display_drawable</span>
  <span class='kw'>end</span>

  <span class='comment'># Nil parent is fine for DocumentRoot and any TextDrawable, so we have to specify it.
</span>  <span class='id identifier rubyid_display_parent'>display_parent</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Scarpe.html" title="Scarpe (module)">Scarpe</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Scarpe::Webview::DisplayService (class)">DisplayService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="#instance-class_method" title="Scarpe::Webview::DisplayService.instance (method)">instance</a></span></span><span class='period'>.</span><span class='id identifier rubyid_query_display_drawable_for'>query_display_drawable_for</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_id'>parent_id</span><span class='comma'>,</span> <span class='label'>nil_ok:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_display_drawable'>display_drawable</span><span class='period'>.</span><span class='id identifier rubyid_set_parent'>set_parent</span><span class='lparen'>(</span><span class='id identifier rubyid_display_parent'>display_parent</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_display_drawable'>display_drawable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    #<strong>destroy</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Destroy the display service and the app. Quit the process (eventually.)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scarpe/wv/webview_local_display.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy'>destroy</span>
  <span class='ivar'>@app</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span>
  <span class='const'><span class='object_link'><a href="../Webview.html" title="Scarpe::Webview (module)">Webview</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Scarpe::Webview::DisplayService (class)">DisplayService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'><span class='object_link'><a href="#instance-class_method" title="Scarpe::Webview::DisplayService.instance (method)">instance</a></span></span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Jan  4 17:59:39 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.2.0).
</div>

    </div>
  </body>
</html>